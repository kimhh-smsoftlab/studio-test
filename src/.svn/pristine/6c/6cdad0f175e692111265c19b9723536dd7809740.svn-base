var FastDataView;
(function(f){var d=new ArrayBuffer(8),h=new Uint8Array(d),k=new Int8Array(d);new Uint16Array(d);var l=new Int16Array(d);new Uint32Array(d);var m=new Int32Array(d),n=new Float32Array(d),p=new Float64Array(d);FastDataView=function(a,b,c){this.initCacheArray();a?(this.setBuffer(a,b,c),this.maxbyteLength=this.byteLength):(this.buffer=null,this.byteLength=this.byteOffset=0,this.byteArray=null,this.maxbyteLength=this.cursor=0)};FastDataView.version="0.3.3";FastDataView.prototype.clear=function(){this.cursor=
this.byteLength=this.byteOffset=0};FastDataView.prototype.initCacheArray=function(){this.uint8Array=h;this.int8Array=k;this.int16Array=l;this.int32Array=m;this.float32Array=n;this.float64Array=p;this.maxbyteLength=0};FastDataView.prototype.transfer=function(a){if(!(a instanceof ArrayBuffer))throw new TypeError("Source must be an instance of ArrayBuffer");this.clear();this.maxbyteLength<a.byteLength?(this.byteArray=null,this.byteArray=new Uint8Array(a,0,a.byteLength)):this.byteArray.set(a,0);this.maxbyteLength=
Math.max(this.maxbyteLength,a.byteLength);this.buffer=this.byteArray.buffer;this.byteLength=a.byteLength};FastDataView.prototype.setBuffer=function(a,b,c){this.byteArray=a instanceof Uint8Array||a.buffer?a:new Uint8Array(a);this.buffer=this.byteArray.buffer;this.setRange(b,c)};FastDataView.prototype.setRange=function(a,b){var c=this.buffer.byteLength;this.byteOffset=Math.min(c,a||0)|0;a=c-this.byteOffset;this.byteLength=Math.min(a,b||a)|0;this.byteEnd=this.byteOffset+this.byteLength;this.cursor=0};
FastDataView.prototype.subarray=function(a,b,c){return c?this.byteArray.subarray(a,b):b?this.byteArray.subarray(a+this.byteOffset,Math.min(this.byteEnd,b+this.byteOffset)):this.byteArray.subarray(a+this.byteOffset,this.byteEnd)};FastDataView.prototype.getRest=function(){return this.byteArray.subarray(this.cursor+this.byteOffset,this.byteEnd)};FastDataView.prototype.skip=function(a){this.cursor=Math.min(this.byteEnd,this.cursor+a)};FastDataView.prototype.setUint8=function(a,b){this.byteArray[a+this.byteOffset]=
b};FastDataView.prototype.getUint8=function(a){return this.byteArray[a+this.byteOffset]};FastDataView.prototype.pushUint8=function(a){this.byteArray[this.byteOffset+this.cursor++]=a};FastDataView.prototype.nextUint8=function(){return this.byteArray[this.byteOffset+this.cursor++]};FastDataView.prototype.setInt8=function(a,b){this.byteArray[a+this.byteOffset]=b};FastDataView.prototype.getInt8=function(a){this.uint8Array[0]=this.byteArray[a+this.byteOffset];return this.int8Array[0]};FastDataView.prototype.pushInt8=
function(a){this.byteArray[this.byteOffset+this.cursor++]=a};FastDataView.prototype.nextInt8=function(){this.uint8Array[0]=this.byteArray[this.byteOffset+this.cursor++];return this.int8Array[0]};FastDataView.prototype.setUint16=function(a,b,c){a+=this.byteOffset;c?(this.byteArray[a+0]=b,this.byteArray[a+1]=b>>>8):(this.byteArray[a+0]=b>>>8,this.byteArray[a+1]=b)};FastDataView.prototype.getUint16=function(a,b){a+=this.byteOffset;b?(b=this.byteArray[a+0],a=this.byteArray[a+1]):(b=this.byteArray[a+1],
a=this.byteArray[a+0]);return a<<8|b};FastDataView.prototype.pushUint16=function(a,b){var c=this.byteOffset+this.cursor;b?(this.byteArray[c+0]=a,this.byteArray[c+1]=a>>>8):(this.byteArray[c+0]=a>>>8,this.byteArray[c+1]=a);this.cursor+=2};FastDataView.prototype.nextUint16=function(a){var b=this.byteOffset+this.cursor;a?(a=this.byteArray[b+0],b=this.byteArray[b+1]):(a=this.byteArray[b+1],b=this.byteArray[b+0]);this.cursor+=2;return b<<8|a};FastDataView.prototype.setInt16=function(a,b,c){a+=this.byteOffset;
c?(this.byteArray[a+0]=b,this.byteArray[a+1]=b>>>8):(this.byteArray[a+0]=b>>>8,this.byteArray[a+1]=b)};FastDataView.prototype.getInt16=function(a,b){a+=this.byteOffset;b?(this.uint8Array[0]=this.byteArray[a+0],this.uint8Array[1]=this.byteArray[a+1]):(this.uint8Array[0]=this.byteArray[a+1],this.uint8Array[1]=this.byteArray[a+0]);return this.int16Array[0]};FastDataView.prototype.pushInt16=function(a,b){var c=this.byteOffset+this.cursor;b?(this.byteArray[c+0]=a,this.byteArray[c+1]=a>>>8):(this.byteArray[c+
0]=a>>>8,this.byteArray[c+1]=a);this.cursor+=2};FastDataView.prototype.nextInt16=function(a){var b=this.byteOffset+this.cursor;a?(this.uint8Array[0]=this.byteArray[b+0],this.uint8Array[1]=this.byteArray[b+1]):(this.uint8Array[0]=this.byteArray[b+1],this.uint8Array[1]=this.byteArray[b+0]);this.cursor+=2;return this.int16Array[0]};FastDataView.prototype.setUint32=function(a,b,c){a+=this.byteOffset;c?(this.byteArray[a+0]=b,this.byteArray[a+1]=b>>>8,this.byteArray[a+2]=b>>>16,this.byteArray[a+3]=b>>>
24):(this.byteArray[a+0]=b>>>24,this.byteArray[a+1]=b>>>16,this.byteArray[a+2]=b>>>8,this.byteArray[a+3]=b)};FastDataView.prototype.getUint32=function(a,b){a+=this.byteOffset;if(b){b=this.byteArray[a+0];var c=this.byteArray[a+1];var d=this.byteArray[a+2];a=this.byteArray[a+3]}else b=this.byteArray[a+3],c=this.byteArray[a+2],d=this.byteArray[a+1],a=this.byteArray[a+0];return(a<<24>>>0)+(d<<16|c<<8|b)};FastDataView.prototype.pushUint32=function(a,b){var c=this.byteOffset+this.cursor;b?(this.byteArray[c+
0]=a,this.byteArray[c+1]=a>>>8,this.byteArray[c+2]=a>>>16,this.byteArray[c+3]=a>>>24):(this.byteArray[c+0]=a>>>24,this.byteArray[c+1]=a>>>16,this.byteArray[c+2]=a>>>8,this.byteArray[c+3]=a);this.cursor+=4};FastDataView.prototype.nextUint32=function(a){var b=this.byteOffset+this.cursor;if(a){a=this.byteArray[b+0];var c=this.byteArray[b+1];var d=this.byteArray[b+2];b=this.byteArray[b+3]}else a=this.byteArray[b+3],c=this.byteArray[b+2],d=this.byteArray[b+1],b=this.byteArray[b+0];this.cursor+=4;return(b<<
24>>>0)+(d<<16|c<<8|a)};FastDataView.prototype.setInt32=function(a,b,c){a+=this.byteOffset;c?(this.byteArray[a+0]=b,this.byteArray[a+1]=b>>>8,this.byteArray[a+2]=b>>>16,this.byteArray[a+3]=b>>>24):(this.byteArray[a+0]=b>>>24,this.byteArray[a+1]=b>>>16,this.byteArray[a+2]=b>>>8,this.byteArray[a+3]=b)};FastDataView.prototype.getInt32=function(a,b){a+=this.byteOffset;b?(this.uint8Array[0]=this.byteArray[a+0],this.uint8Array[1]=this.byteArray[a+1],this.uint8Array[2]=this.byteArray[a+2],this.uint8Array[3]=
this.byteArray[a+3]):(this.uint8Array[0]=this.byteArray[a+3],this.uint8Array[1]=this.byteArray[a+2],this.uint8Array[2]=this.byteArray[a+1],this.uint8Array[3]=this.byteArray[a+0]);return this.int32Array[0]};FastDataView.prototype.pushInt32=function(a,b){var c=this.byteOffset+this.cursor;b?(this.byteArray[c+0]=a,this.byteArray[c+1]=a>>>8,this.byteArray[c+2]=a>>>16,this.byteArray[c+3]=a>>>24):(this.byteArray[c+0]=a>>>24,this.byteArray[c+1]=a>>>16,this.byteArray[c+2]=a>>>8,this.byteArray[c+3]=a);this.cursor+=
4};FastDataView.prototype.nextInt32=function(a){var b=this.byteOffset+this.cursor;a?(this.uint8Array[0]=this.byteArray[b+0],this.uint8Array[1]=this.byteArray[b+1],this.uint8Array[2]=this.byteArray[b+2],this.uint8Array[3]=this.byteArray[b+3]):(this.uint8Array[0]=this.byteArray[b+3],this.uint8Array[1]=this.byteArray[b+2],this.uint8Array[2]=this.byteArray[b+1],this.uint8Array[3]=this.byteArray[b+0]);this.cursor+=4;return this.int32Array[0]};FastDataView.prototype.setFloat32=function(a,b,c){a+=this.byteOffset;
this.float32Array[0]=b;c?(this.byteArray[a+0]=this.uint8Array[0],this.byteArray[a+1]=this.uint8Array[1],this.byteArray[a+2]=this.uint8Array[2],this.byteArray[a+3]=this.uint8Array[3]):(this.byteArray[a+0]=this.uint8Array[3],this.byteArray[a+1]=this.uint8Array[2],this.byteArray[a+2]=this.uint8Array[1],this.byteArray[a+3]=this.uint8Array[0])};FastDataView.prototype.getFloat32=function(a,b){a+=this.byteOffset;b?(this.uint8Array[0]=this.byteArray[a+0],this.uint8Array[1]=this.byteArray[a+1],this.uint8Array[2]=
this.byteArray[a+2],this.uint8Array[3]=this.byteArray[a+3]):(this.uint8Array[0]=this.byteArray[a+3],this.uint8Array[1]=this.byteArray[a+2],this.uint8Array[2]=this.byteArray[a+1],this.uint8Array[3]=this.byteArray[a+0]);return this.float32Array[0]};FastDataView.prototype.pushFloat32=function(a,b){var c=this.byteOffset+this.cursor;this.float32Array[0]=a;b?(this.byteArray[c+0]=this.uint8Array[0],this.byteArray[c+1]=this.uint8Array[1],this.byteArray[c+2]=this.uint8Array[2],this.byteArray[c+3]=this.uint8Array[3]):
(this.byteArray[c+0]=this.uint8Array[3],this.byteArray[c+1]=this.uint8Array[2],this.byteArray[c+2]=this.uint8Array[1],this.byteArray[c+3]=this.uint8Array[0]);this.cursor+=4};FastDataView.prototype.nextFloat32=function(a){var b=this.byteOffset+this.cursor;a?(this.uint8Array[0]=this.byteArray[b+0],this.uint8Array[1]=this.byteArray[b+1],this.uint8Array[2]=this.byteArray[b+2],this.uint8Array[3]=this.byteArray[b+3]):(this.uint8Array[0]=this.byteArray[b+3],this.uint8Array[1]=this.byteArray[b+2],this.uint8Array[2]=
this.byteArray[b+1],this.uint8Array[3]=this.byteArray[b+0]);this.cursor+=4;return this.float32Array[0]};FastDataView.prototype.setFloat64=function(a,b,c){a+=this.byteOffset;this.float64Array[0]=b;c?(this.byteArray[a+0]=this.uint8Array[0],this.byteArray[a+1]=this.uint8Array[1],this.byteArray[a+2]=this.uint8Array[2],this.byteArray[a+3]=this.uint8Array[3],this.byteArray[a+4]=this.uint8Array[4],this.byteArray[a+5]=this.uint8Array[5],this.byteArray[a+6]=this.uint8Array[6],this.byteArray[a+7]=this.uint8Array[7]):
(this.byteArray[a+0]=this.uint8Array[7],this.byteArray[a+1]=this.uint8Array[6],this.byteArray[a+2]=this.uint8Array[5],this.byteArray[a+3]=this.uint8Array[4],this.byteArray[a+4]=this.uint8Array[3],this.byteArray[a+5]=this.uint8Array[2],this.byteArray[a+6]=this.uint8Array[1],this.byteArray[a+7]=this.uint8Array[0])};FastDataView.prototype.getFloat64=function(a,b){a+=this.byteOffset;b?(this.uint8Array[0]=this.byteArray[a+0],this.uint8Array[1]=this.byteArray[a+1],this.uint8Array[2]=this.byteArray[a+2],
this.uint8Array[3]=this.byteArray[a+3],this.uint8Array[4]=this.byteArray[a+4],this.uint8Array[5]=this.byteArray[a+5],this.uint8Array[6]=this.byteArray[a+6],this.uint8Array[7]=this.byteArray[a+7]):(this.uint8Array[0]=this.byteArray[a+7],this.uint8Array[1]=this.byteArray[a+6],this.uint8Array[2]=this.byteArray[a+5],this.uint8Array[3]=this.byteArray[a+4],this.uint8Array[4]=this.byteArray[a+3],this.uint8Array[5]=this.byteArray[a+2],this.uint8Array[6]=this.byteArray[a+1],this.uint8Array[7]=this.byteArray[a+
0]);return this.float64Array[0]};FastDataView.prototype.pushFloat64=function(a,b){var c=this.byteOffset+this.cursor;this.float64Array[0]=a;b?(this.byteArray[c+0]=this.uint8Array[0],this.byteArray[c+1]=this.uint8Array[1],this.byteArray[c+2]=this.uint8Array[2],this.byteArray[c+3]=this.uint8Array[3],this.byteArray[c+4]=this.uint8Array[4],this.byteArray[c+5]=this.uint8Array[5],this.byteArray[c+6]=this.uint8Array[6],this.byteArray[c+7]=this.uint8Array[7]):(this.byteArray[c+0]=this.uint8Array[7],this.byteArray[c+
1]=this.uint8Array[6],this.byteArray[c+2]=this.uint8Array[5],this.byteArray[c+3]=this.uint8Array[4],this.byteArray[c+4]=this.uint8Array[3],this.byteArray[c+5]=this.uint8Array[2],this.byteArray[c+6]=this.uint8Array[1],this.byteArray[c+7]=this.uint8Array[0]);this.cursor+=8};FastDataView.prototype.nextFloat64=function(a){var b=this.byteOffset+this.cursor;a?(this.uint8Array[0]=this.byteArray[b+0],this.uint8Array[1]=this.byteArray[b+1],this.uint8Array[2]=this.byteArray[b+2],this.uint8Array[3]=this.byteArray[b+
3],this.uint8Array[4]=this.byteArray[b+4],this.uint8Array[5]=this.byteArray[b+5],this.uint8Array[6]=this.byteArray[b+6],this.uint8Array[7]=this.byteArray[b+7]):(this.uint8Array[0]=this.byteArray[b+7],this.uint8Array[1]=this.byteArray[b+6],this.uint8Array[2]=this.byteArray[b+5],this.uint8Array[3]=this.byteArray[b+4],this.uint8Array[4]=this.byteArray[b+3],this.uint8Array[5]=this.byteArray[b+2],this.uint8Array[6]=this.byteArray[b+1],this.uint8Array[7]=this.byteArray[b+0]);this.cursor+=8;return this.float64Array[0]};
FastDataView.prototype.getString=function(a,b){return String.fromCharCode.apply(null,this.subarray(a,b,!0))};FastDataView.prototype.A2UBin=function(a,b,c){a=b.datalen;var d=void 0==b.datatype?FT_STRING:b.datatype,e=b.offsetlen,f=b.encoding,g=0;void 0!=b.attr&&1==b.attr&&(g=1);switch(d){case FT_BYTE:return String.fromCharCode(this.getUint8(e));case FT_SHORT:return this.getInt16(e,c);case FT_USHORT:return this.getUint16(e,c);case FT_LONG:case FT_DAY:case FT_TIME:return this.getInt32(e,c);case FT_ULONG:return this.getUint32(e,
c);case FT_FLOAT:return this.getFloat32(e,c);case FT_DOUBLE:case FT_LONGLONG:return this.getFloat64(e,c);case FT_STRINGNUM:return 1==g?this.getString(e,e+a):this.getString(e,e+a).Ntrim();case FT_STRING:return 1==g?hi5.A2U(this.subarray(e,e+a,!0),f):hi5.A2U(this.subarray(e,e+a,!0),f).Ntrim()}return""};f&&(f.FastDataView=FastDataView);"undefined"!==typeof module&&(module.exports=FastDataView)})("undefined"!==typeof window?window:null);

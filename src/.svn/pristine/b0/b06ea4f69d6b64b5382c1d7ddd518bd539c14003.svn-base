(function(n){function h(a,c,b){return c<=a&&a<=b}function z(a){if(void 0===a)return{};if(a===Object(a))return a;throw TypeError("Could not convert argument to dictionary");}function t(a){return 0<=a&&127>=a}function C(a){this.tokens=[].slice.call(a);this.tokens.reverse()}function k(a,c){if(a)throw TypeError("Decoder error");return c||65533}function u(a){throw TypeError("The code point "+a+" could not be encoded.");}function D(a){a=String(a).trim().toLowerCase();return Object.prototype.hasOwnProperty.call(E,
a)?E[a]:null}function w(a,c){return c?c[a]||null:null}function x(a,c){a=c.indexOf(a);return-1===a?null:a}function r(a){if(!("encoding-indexes"in n))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return n["encoding-indexes"][a]}function M(a){F=F||r("jis0208").map(function(a,b){return h(b,8272,8835)?null:a});return F.indexOf(a)}function N(a){var c=G=G||r("big5").map(function(b,a){return 5024>a?null:b});return 9552===a||9566===a||9569===a||9578===a||21313===a||21317===
a?c.lastIndexOf(a):x(a,c)}function y(a,c){if(!(this instanceof y))throw TypeError("Called as a function. Did you forget 'new'?");a=void 0!==a?String(a):"utf-8";c=z(c);this._decoder=this._encoding=null;this._BOMseen=this._ignoreBOM=!1;this._error_mode="replacement";this._do_not_flush=!1;var b=D(a);if(null===b||"replacement"===b.name)throw RangeError("Unknown encoding: "+a);if(!m[b.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=b;c.fatal&&
(this._error_mode="fatal");c.ignoreBOM&&(this._ignoreBOM=!0);Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase(),this.fatal="fatal"===this._error_mode,this.ignoreBOM=this._ignoreBOM);return this}function A(a,c){if(!(this instanceof A))throw TypeError("Called as a function. Did you forget 'new'?");c=z(c);this._encoder=this._encoding=null;this._do_not_flush=!1;this._fatal=c.fatal?"fatal":"replacement";if(c.NONSTANDARD_allowLegacyEncoding){a=void 0!==a?String(a):"utf-8";c=D(a);if(null===
c||"replacement"===c.name)throw RangeError("Unknown encoding: "+a);if(!p[c.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=c}else this._encoding=D("utf-8"),void 0!==a&&"console"in n&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase());return this}function O(a){var c=a.fatal,b=0,e=0,d=0,g=128,f=191;this.handler=function(a,l){if(-1===
l&&0!==d)return d=0,k(c);if(-1===l)return-1;if(0===d){if(h(l,0,127))return l;if(h(l,194,223))d=1,b=l&31;else if(h(l,224,239))224===l&&(g=160),237===l&&(f=159),d=2,b=l&15;else if(h(l,240,244))240===l&&(g=144),244===l&&(f=143),d=3,b=l&7;else return k(c);return null}if(!h(l,g,f))return b=d=e=0,g=128,f=191,a.prepend(l),k(c);g=128;f=191;b=b<<6|l&63;e+=1;if(e!==d)return null;a=b;b=d=e=0;return a}}function P(a){this.handler=function(a,b){if(-1===b)return-1;if(q(b))return b;if(h(b,128,2047)){var c=1;var d=
192}else h(b,2048,65535)?(c=2,d=224):h(b,65536,1114111)&&(c=3,d=240);for(a=[(b>>6*c)+d];0<c;)a.push(128|b>>6*(c-1)&63),--c;return a}}function Q(a,c){var b=c.fatal;this.handler=function(c,d){if(-1===d)return-1;if(t(d))return d;c=a[d-128];return null===c?k(b):c}}function R(a,c){this.handler=function(b,c){if(-1===c)return-1;if(q(c))return c;b=x(c,a);null===b&&u(c);return b+128}}function H(a){var c=a.fatal,b=0,e=0,d=0;this.handler=function(a,f){if(-1===f&&0===b&&0===e&&0===d)return-1;-1!==f||0===b&&0===
e&&0===d||(d=e=b=0,k(c));if(0!==d){var g=null;if(h(f,48,57))if(g=10*(126*(10*(b-129)+e-48)+d-129)+f-48,39419<g&&189E3>g||1237575<g)g=null;else if(7457===g)g=59335;else{var l=0,m=0,p=r("gb18030-ranges"),n;for(n=0;n<p.length;++n){var q=p[n];if(q[0]<=g)l=q[0],m=q[1];else break}g=m+g-l}f=[e,d,f];d=e=b=0;return null===g?(a.prepend(f),k(c)):g}if(0!==e){if(h(f,129,254))return d=f,null;a.prepend([e,f]);e=b=0;return k(c)}if(0!==b){if(h(f,48,57))return e=f,null;g=b;l=null;b=0;m=127>f?64:65;if(h(f,64,126)||
h(f,128,254))l=190*(g-129)+(f-m);g=null===l?null:w(l,r("gb18030"));null===g&&t(f)&&a.prepend(f);return null===g?k(c):g}return t(f)?f:128===f?8364:h(f,129,254)?(b=f,null):k(c)}}function I(a,c){this.handler=function(b,a){if(-1===a)return-1;if(q(a))return a;if(58853===a)return u(a);if(c&&8364===a)return 128;b=x(a,r("gb18030"));if(null!==b)return a=v(b/190)+129,b%=190,[a,b+(63>b?64:65)];if(c)return u(a);if(59335===a)b=7457;else{var d=b=0,e=r("gb18030-ranges"),f;for(f=0;f<e.length;++f){var h=e[f];if(h[1]<=
a)b=h[1],d=h[0];else break}b=d+a-b}a=v(b/10/126/10);b-=12600*a;d=v(b/10/126);b-=1260*d;e=v(b/10);return[a+129,d+48,e+129,b-10*e+48]}}function S(a){var c=a.fatal,b=0;this.handler=function(a,d){if(-1===d&&0!==b)return b=0,k(c);if(-1===d&&0===b)return-1;if(0!==b){var e=b,f=null;b=0;var m=127>d?64:98;if(h(d,64,126)||h(d,161,254))f=157*(e-129)+(d-m);switch(f){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}e=null===f?null:w(f,r("big5"));null===e&&
t(d)&&a.prepend(d);return null===e?k(c):e}return t(d)?d:h(d,129,254)?(b=d,null):k(c)}}function T(a){this.handler=function(a,b){if(-1===b)return-1;if(q(b))return b;var c=N(b);if(null===c)return u(b);a=v(c/157)+129;if(161>a)return u(b);b=c%157;return[a,b+(63>b?64:98)]}}function U(a){var c=a.fatal,b=!1,e=0;this.handler=function(a,g){if(-1===g&&0!==e)return e=0,k(c);if(-1===g&&0===e)return-1;if(142===e&&h(g,161,223))return e=0,65216+g;if(143===e&&h(g,161,254))return b=!0,e=g,null;if(0!==e){var d=e;e=
0;var m=null;h(d,161,254)&&h(g,161,254)&&(m=w(94*(d-161)+(g-161),r(b?"jis0212":"jis0208")));b=!1;h(g,161,254)||a.prepend(g);return null===m?k(c):m}return t(g)?g:142===g||143===g||h(g,161,254)?(e=g,null):k(c)}}function V(a){this.handler=function(a,b){if(-1===b)return-1;if(q(b))return b;if(165===b)return 92;if(8254===b)return 126;if(h(b,65377,65439))return[142,b-65377+161];8722===b&&(b=65293);a=x(b,r("jis0208"));return null===a?u(b):[v(a/94)+161,a%94+161]}}function W(a){var c=a.fatal,b=0,e=0,d=!1;this.handler=
function(a,f){switch(b){default:case 0:if(27===f)return b=5,null;if(h(f,0,127)&&14!==f&&15!==f&&27!==f)return d=!1,f;if(-1===f)return-1;d=!1;return k(c);case 1:if(27===f)return b=5,null;if(92===f)return d=!1,165;if(126===f)return d=!1,8254;if(h(f,0,127)&&14!==f&&15!==f&&27!==f&&92!==f&&126!==f)return d=!1,f;if(-1===f)return-1;d=!1;return k(c);case 2:if(27===f)return b=5,null;if(h(f,33,95))return d=!1,65344+f;if(-1===f)return-1;d=!1;return k(c);case 3:if(27===f)return b=5,null;if(h(f,33,126))return d=
!1,e=f,b=4,null;if(-1===f)return-1;d=!1;return k(c);case 4:if(27===f)return b=5,k(c);if(h(f,33,126))return b=3,a=w(94*(e-33)+f-33,r("jis0208")),null===a?k(c):a;if(-1===f)return b=3,a.prepend(f),k(c);b=3;return k(c);case 5:if(36===f||40===f)return e=f,b=6,null;a.prepend(f);d=!1;b=0;return k(c);case 6:var g=e;e=0;var l=null;40===g&&66===f&&(l=0);40===g&&74===f&&(l=1);40===g&&73===f&&(l=2);36!==g||64!==f&&66!==f||(l=3);if(null!==l)return b=b=l,a=d,d=!0,a?k(c):null;a.prepend([g,f]);d=!1;b=0;return k(c)}}}
function X(a){var c=0;this.handler=function(a,e){if(-1===e&&0!==c)return a.prepend(e),c=0,[27,40,66];if(-1===e&&0===c)return-1;if(!(0!==c&&1!==c||14!==e&&15!==e&&27!==e))return u(65533);if(0===c&&q(e))return e;if(1===c&&(q(e)&&92!==e&&126!==e||165==e||8254==e)){if(q(e))return e;if(165===e)return 92;if(8254===e)return 126}if(q(e)&&0!==c)return a.prepend(e),c=0,[27,40,66];if((165===e||8254===e)&&1!==c)return a.prepend(e),c=1,[27,40,74];8722===e&&(e=65293);var b=x(e,r("jis0208"));return null===b?u(e):
2!==c?(a.prepend(e),c=2,[27,36,66]):[v(b/94)+33,b%94+33]}}function Y(a){var c=a.fatal,b=0;this.handler=function(a,d){if(-1===d&&0!==b)return b=0,k(c);if(-1===d&&0===b)return-1;if(0!==b){var e=b,f=null;b=0;var m=127>d?64:65,l=160>e?129:193;if(h(d,64,126)||h(d,128,252))f=188*(e-l)+d-m;if(h(f,8836,10715))return 48508+f;e=null===f?null:w(f,r("jis0208"));null===e&&t(d)&&a.prepend(d);return null===e?k(c):e}return t(d)||128===d?d:h(d,161,223)?65216+d:h(d,129,159)||h(d,224,252)?(b=d,null):k(c)}}function Z(a){this.handler=
function(a,b){if(-1===b)return-1;if(q(b)||128===b)return b;if(165===b)return 92;if(8254===b)return 126;if(h(b,65377,65439))return b-65377+161;8722===b&&(b=65293);a=M(b);if(null===a)return u(b);b=v(a/188);a%=188;return[b+(31>b?129:193),a+(63>a?64:65)]}}function aa(a){var c=a.fatal,b=0;this.handler=function(a,d){if(-1===d&&0!==b)return b=0,k(c);if(-1===d&&0===b)return-1;if(0!==b){var e=b,f=null;b=0;h(d,65,254)&&(f=190*(e-129)+(d-65));e=null===f?null:w(f,r("euc-kr"));null===f&&t(d)&&a.prepend(d);return null===
e?k(c):e}return t(d)?d:h(d,129,254)?(b=d,null):k(c)}}function ba(a){this.handler=function(a,b){if(-1===b)return-1;if(q(b))return b;a=x(b,r("euc-kr"));return null===a?u(b):[v(a/190)+129,a%190+65]}}function B(a,c){var b=a>>8;a&=255;return c?[b,a]:[a,b]}function J(a,c){var b=c.fatal,e=null,d=null;this.handler=function(c,f){if(-1===f&&(null!==e||null!==d))return k(b);if(-1===f&&null===e&&null===d)return-1;if(null===e)return e=f,null;f=a?(e<<8)+f:(f<<8)+e;e=null;if(null!==d){var g=d;d=null;if(h(f,56320,
57343))return 65536+1024*(g-55296)+(f-56320);c.prepend(B(f,a));return k(b)}return h(f,55296,56319)?(d=f,null):h(f,56320,57343)?k(b):f}}function K(a,c){this.handler=function(b,c){if(-1===c)return-1;if(h(c,0,65535))return B(c,a);b=B((c-65536>>10)+55296,a);c=B((c-65536&1023)+56320,a);return b.concat(c)}}function ca(a){this.handler=function(a,b){return-1===b?-1:t(b)?b:63360+b-128}}function da(a){this.handler=function(a,b){return-1===b?-1:q(b)?b:h(b,63360,63487)?b-63360+128:u(b)}}"undefined"!==typeof module&&
module.exports&&!n["encoding-indexes"]&&(n["encoding-indexes"]=require("./encoding-indexes.js")["encoding-indexes"]);var v=Math.floor,q=t;C.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():-1},prepend:function(a){if(Array.isArray(a))for(;a.length;)this.tokens.push(a.pop());else this.tokens.push(a)},push:function(a){if(Array.isArray(a))for(;a.length;)this.tokens.unshift(a.shift());else this.tokens.unshift(a)}};var L=[{encodings:[{labels:["unicode-1-1-utf-8",
"utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:"csisolatin2 iso-8859-2 iso-ir-101 iso8859-2 iso88592 iso_8859-2 iso_8859-2:1987 l2 latin2".split(" "),name:"ISO-8859-2"},{labels:"csisolatin3 iso-8859-3 iso-ir-109 iso8859-3 iso88593 iso_8859-3 iso_8859-3:1988 l3 latin3".split(" "),name:"ISO-8859-3"},{labels:"csisolatin4 iso-8859-4 iso-ir-110 iso8859-4 iso88594 iso_8859-4 iso_8859-4:1988 l4 latin4".split(" "),name:"ISO-8859-4"},
{labels:"csisolatincyrillic cyrillic iso-8859-5 iso-ir-144 iso8859-5 iso88595 iso_8859-5 iso_8859-5:1988".split(" "),name:"ISO-8859-5"},{labels:"arabic asmo-708 csiso88596e csiso88596i csisolatinarabic ecma-114 iso-8859-6 iso-8859-6-e iso-8859-6-i iso-ir-127 iso8859-6 iso88596 iso_8859-6 iso_8859-6:1987".split(" "),name:"ISO-8859-6"},{labels:"csisolatingreek ecma-118 elot_928 greek greek8 iso-8859-7 iso-ir-126 iso8859-7 iso88597 iso_8859-7 iso_8859-7:1987 sun_eu_greek".split(" "),name:"ISO-8859-7"},
{labels:"csiso88598e csisolatinhebrew hebrew iso-8859-8 iso-8859-8-e iso-ir-138 iso8859-8 iso88598 iso_8859-8 iso_8859-8:1988 visual".split(" "),name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:"csisolatin6 iso-8859-10 iso-ir-157 iso8859-10 iso885910 l6 latin6".split(" "),name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:"csisolatin9 iso-8859-15 iso8859-15 iso885915 iso_8859-15 l9".split(" "),
name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:"dos-874 iso-8859-11 iso8859-11 iso885911 tis-620 windows-874".split(" "),name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:"ansi_x3.4-1968 ascii cp1252 cp819 csisolatin1 ibm819 iso-8859-1 iso-ir-100 iso8859-1 iso88591 iso_8859-1 iso_8859-1:1987 l1 latin1 us-ascii windows-1252 x-cp1252".split(" "),
name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:"cp1254 csisolatin5 iso-8859-9 iso-ir-148 iso8859-9 iso88599 iso_8859-9 iso_8859-9:1989 l5 latin5 windows-1254 x-cp1254".split(" "),name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},
{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:"chinese csgb2312 csiso58gb231280 gb2312 gb_2312 gb_2312-80 gbk iso-ir-58 x-gbk".split(" "),name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese",
"euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:"csshiftjis ms932 ms_kanji shift-jis shift_jis sjis windows-31j x-sjis".split(" "),name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:"cseuckr csksc56011987 euc-kr iso-ir-149 korean ks_c_5601-1987 ks_c_5601-1989 ksc5601 ksc_5601 windows-949".split(" "),name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312",
"iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],E={};L.forEach(function(a){a.encodings.forEach(function(a){a.labels.forEach(function(b){E[b]=a})})});var p={},m={},F,G;Object.defineProperty&&(Object.defineProperty(y.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(y.prototype,
"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(y.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}}));y.prototype.decode=function(a,c){a="object"===typeof a&&a instanceof Uint8Array?a:"object"===typeof a&&a instanceof ArrayBuffer?new Uint8Array(a):"object"===typeof a&&"buffer"in a&&a.buffer instanceof ArrayBuffer?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(0);c=z(c);this._do_not_flush||(this._decoder=m[this._encoding.name]({fatal:"fatal"===
this._error_mode}),this._BOMseen=!1);this._do_not_flush=!!c.stream;a=new C(a);c=[];for(var b;;){b=a.read();if(-1===b)break;b=this._decoder.handler(a,b);if(-1===b)break;null!==b&&(Array.isArray(b)?c.push.apply(c,b):c.push(b))}if(!this._do_not_flush){do{b=this._decoder.handler(a,a.read());if(-1===b)break;null!==b&&(Array.isArray(b)?c.push.apply(c,b):c.push(b))}while(!a.endOfStream());this._decoder=null}-1===["UTF-8","UTF-16LE","UTF-16BE"].indexOf(this._encoding.name)||this._ignoreBOM||this._BOMseen||
(0<c.length&&65279===c[0]?(this._BOMseen=!0,c.shift()):0<c.length&&(this._BOMseen=!0));a="";for(b=0;b<c.length;++b){var e=c[b];65535>=e?a+=String.fromCharCode(e):(e-=65536,a+=String.fromCharCode((e>>10)+55296,(e&1023)+56320))}return a};Object.defineProperty&&Object.defineProperty(A.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}});A.prototype.encode=function(a,c){a=void 0===a?"":String(a);c=z(c);this._do_not_flush||(this._encoder=p[this._encoding.name]({fatal:"fatal"===
this._fatal}));this._do_not_flush=!!c.stream;a=String(a);c=a.length;for(var b=0,e=[];b<c;){var d=a.charCodeAt(b);if(55296>d||57343<d)e.push(d);else if(56320<=d&&57343>=d)e.push(65533);else if(55296<=d&&56319>=d)if(b===c-1)e.push(65533);else{var g=a.charCodeAt(b+1);56320<=g&&57343>=g?(e.push(65536+((d&1023)<<10)+(g&1023)),b+=1):e.push(65533)}b+=1}a=new C(e);for(c=[];;){b=a.read();if(-1===b)break;b=this._encoder.handler(a,b);if(-1===b)break;Array.isArray(b)?c.push.apply(c,b):c.push(b)}if(!this._do_not_flush){for(;;){b=
this._encoder.handler(a,a.read());if(-1===b)break;Array.isArray(b)?c.push.apply(c,b):c.push(b)}this._encoder=null}return new Uint8Array(c)};p["UTF-8"]=function(a){return new P(a)};m["UTF-8"]=function(a){return new O(a)};(function(){"encoding-indexes"in n&&L.forEach(function(a){"Legacy single-byte encodings"===a.heading&&a.encodings.forEach(function(a){a=a.name;var b=r(a.toLowerCase());m[a]=function(a){return new Q(b,a)};p[a]=function(a){return new R(b,a)}})})})();m.GBK=function(a){return new H(a)};
p.GBK=function(a){return new I(a,!0)};p.gb18030=function(a){return new I(a)};m.gb18030=function(a){return new H(a)};p.Big5=function(a){return new T(a)};m.Big5=function(a){return new S(a)};p["EUC-JP"]=function(a){return new V(a)};m["EUC-JP"]=function(a){return new U(a)};p["ISO-2022-JP"]=function(a){return new X(a)};m["ISO-2022-JP"]=function(a){return new W(a)};p.Shift_JIS=function(a){return new Z(a)};m.Shift_JIS=function(a){return new Y(a)};p["EUC-KR"]=function(a){return new ba(a)};m["EUC-KR"]=function(a){return new aa(a)};
p["UTF-16BE"]=function(a){return new K(!0,a)};m["UTF-16BE"]=function(a){return new J(!0,a)};p["UTF-16LE"]=function(a){return new K(!1,a)};m["UTF-16LE"]=function(a){return new J(!1,a)};p["x-user-defined"]=function(a){return new da(a)};m["x-user-defined"]=function(a){return new ca(a)};n.TextEncoder||(n.TextEncoder=A);n.TextDecoder||(n.TextDecoder=y);"undefined"!==typeof module&&module.exports&&(module.exports={TextEncoder:n.TextEncoder,TextDecoder:n.TextDecoder,EncodingIndexes:n["encoding-indexes"]})})(this||
{});
